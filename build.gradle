plugins {
  id "java"
  id "maven-publish"
  id "edu.wpi.first.GradleRIO" version "2022.4.1"
  id "com.diffplug.spotless" version "6.1.0"
}

sourceCompatibility = JavaVersion.VERSION_11
targetCompatibility = JavaVersion.VERSION_11

dependencies {
  implementation wpi.java.deps.wpilib()
  implementation wpi.java.vendor.java()

  testImplementation 'org.junit.jupiter:junit-jupiter-api:5.8.1'
  testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.8.1'
}

group = 'io.github.tigerbotics7125'

publishing {
  publications {
    maven(MavenPublication) {
      groupId = "${groupId}"
      artifactId = "tigerlib"
      version = project.properties["version"]
      from components.java
    }
  }
}

spotless {
  // get enforce property
  var enforceSpotless = project.properties["enforceSpotless"]
  // set enforceCheck by converting string to boolean
  // defaults to true if not set
  enforceCheck = enforceSpotless != "false"
  java {
    target fileTree('.') {
      include '**/*.java'
      exclude '**/build/**', '**/build-*/**'
    }
    licenseHeaderFile 'LICENSE_SHORTHAND'

    googleJavaFormat('1.8').aosp().reflowLongStrings()

    trimTrailingWhitespace()
    endWithNewline()

    importOrder('\\#', 'io.github.tigerbotics7125.tigerLib', 'io.github.tigerbotics7125', 'edu.wpi', '')
    removeUnusedImports()
  }
    groovyGradle {
        target fileTree('.') {
            include '**/*.gradle'
            exclude '**/build/**', '**/build-*/**'
        }
        greclipse()
        indentWithSpaces(4)
        trimTrailingWhitespace()
        endWithNewline()
    }
  format 'misc', {
    target fileTree('.') {
            include '**/*.md', '**/.gitignore', '**/*.yaml', '**/*.yml'
      exclude '**/build/**', '**/build-*/**'
    }
    trimTrailingWhitespace()
    indentWithSpaces(2)
    endWithNewline()
  }
}
